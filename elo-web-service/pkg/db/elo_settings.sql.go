// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: elo_settings.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createEloSettings = `-- name: CreateEloSettings :exec
INSERT INTO elo_settings (effective_date, elo_const_k, elo_const_d)
VALUES ($1, $2, $3)
`

type CreateEloSettingsParams struct {
	EffectiveDate pgtype.Timestamptz `json:"effective_date"`
	EloConstK     float64            `json:"elo_const_k"`
	EloConstD     float64            `json:"elo_const_d"`
}

func (q *Queries) CreateEloSettings(ctx context.Context, arg CreateEloSettingsParams) error {
	_, err := q.db.Exec(ctx, createEloSettings, arg.EffectiveDate, arg.EloConstK, arg.EloConstD)
	return err
}

const getEloSettingsForDate = `-- name: GetEloSettingsForDate :one
SELECT elo_const_k, elo_const_d
FROM elo_settings
WHERE effective_date <= $1
ORDER BY effective_date DESC
LIMIT 1
`

type GetEloSettingsForDateRow struct {
	EloConstK float64 `json:"elo_const_k"`
	EloConstD float64 `json:"elo_const_d"`
}

func (q *Queries) GetEloSettingsForDate(ctx context.Context, effectiveDate pgtype.Timestamptz) (GetEloSettingsForDateRow, error) {
	row := q.db.QueryRow(ctx, getEloSettingsForDate, effectiveDate)
	var i GetEloSettingsForDateRow
	err := row.Scan(&i.EloConstK, &i.EloConstD)
	return i, err
}

const getLatestEloSettings = `-- name: GetLatestEloSettings :one
SELECT elo_const_k, elo_const_d, effective_date
FROM elo_settings
ORDER BY effective_date DESC
LIMIT 1
`

type GetLatestEloSettingsRow struct {
	EloConstK     float64            `json:"elo_const_k"`
	EloConstD     float64            `json:"elo_const_d"`
	EffectiveDate pgtype.Timestamptz `json:"effective_date"`
}

func (q *Queries) GetLatestEloSettings(ctx context.Context) (GetLatestEloSettingsRow, error) {
	row := q.db.QueryRow(ctx, getLatestEloSettings)
	var i GetLatestEloSettingsRow
	err := row.Scan(&i.EloConstK, &i.EloConstD, &i.EffectiveDate)
	return i, err
}

const listEloSettings = `-- name: ListEloSettings :many
SELECT effective_date, elo_const_k, elo_const_d
FROM elo_settings
ORDER BY effective_date DESC
`

func (q *Queries) ListEloSettings(ctx context.Context) ([]EloSetting, error) {
	rows, err := q.db.Query(ctx, listEloSettings)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []EloSetting{}
	for rows.Next() {
		var i EloSetting
		if err := rows.Scan(&i.EffectiveDate, &i.EloConstK, &i.EloConstD); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
